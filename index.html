<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>baileys</title><meta name="description" content="Documentation for baileys"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">baileys</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>baileys</h1></div><div class="tsd-panel tsd-typography"><a id="baileys---typescriptjavascript-whatsapp-web-api" class="tsd-anchor"></a><h1 class="tsd-anchor-link"><div align='center'>Baileys - Typescript/Javascript WhatsApp Web API</div><a href="#baileys---typescriptjavascript-whatsapp-web-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><div align='center'>
<p><img src="https://img.shields.io/github/downloads/whiskeysockets/baileys/total" alt="GitHub Downloads (all assets, all releases)">
<img src="https://img.shields.io/npm/dw/%40whiskeysockets%2Fbaileys?label=npm&amp;color=%23CB3837" alt="NPM Downloads">
<img src="https://img.shields.io/github/languages/code-size/whiskeysockets/baileys" alt="GitHub code size in bytes">
<img src="https://img.shields.io/github/license/whiskeysockets/baileys" alt="GitHub License">
<img src="https://img.shields.io/discord/725839806084546610?label=discord&amp;color=%235865F2" alt="Discord">
<img src="https://img.shields.io/github/stars/whiskeysockets/baileys" alt="GitHub Repo stars">
<img src="https://img.shields.io/github/forks/whiskeysockets/baileys" alt="GitHub forks"></p>
</div>
<a id="important-note" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Important Note<a href="#important-note" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>This library was originally a project for <strong>CS-2362 at Ashoka University</strong> and is in no way affiliated with or endorsed by WhatsApp. Use at your own discretion. Do not spam people with this. We discourage any stalkerware, bulk or automated messaging usage.</p>
<a id="liability-and-license-notice" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Liability and License Notice<a href="#liability-and-license-notice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Baileys and its maintainers cannot be held liable for misuse of this application, as stated in the <a href="https://github.com/WhiskeySockets/Baileys/blob/master/LICENSE">MIT license</a>.
The maintainers of Baileys do not in any way condone the use of this application in practices that violate the Terms of Service of WhatsApp. The maintainers of this application call upon the personal responsibility of its users to use this application in a fair way, as it is intended to be used.</p>
<a id="" class="tsd-anchor"></a><h2 class="tsd-anchor-link"></h2><ul>
<li>Baileys does not require Selenium or any other browser to be interface with WhatsApp Web, it does so directly using a <strong>WebSocket</strong>.</li>
<li>Not running Selenium or Chromimum saves you like <strong>half a gig</strong> of ram :/</li>
<li>Baileys supports interacting with the multi-device &amp; web versions of WhatsApp.</li>
<li>Thank you to <a href="https://github.com/pokearaujo/multidevice">@pokearaujo</a> for writing his observations on the workings of WhatsApp Multi-Device. Also, thank you to <a href="https://github.com/sigalor/whatsapp-web-reveng">@Sigalor</a> for writing his observations on the workings of WhatsApp Web and thanks to <a href="https://github.com/Rhymen/go-whatsapp/">@Rhymen</a> for the <strong>go</strong> implementation.</li>
</ul>
<div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
The original repository had to be removed by the original author - we now continue development in this repository here.
This is the only official repository and is maintained by the community.
<strong>Join the Discord <a href="https://discord.gg/WeJM5FP9GG">here</a></strong></p>
</div>
<a id="example" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Do check out &amp; run <a href="media/example.ts">example.ts</a> to see an example usage of the library.
The script covers most common use cases.
To run the example script, download or clone the repo and then type the following in a terminal:</p>
<ol>
<li><code>cd path/to/Baileys</code></li>
<li><code>yarn</code></li>
<li><code>yarn example</code></li>
</ol>
<a id="install" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Install<a href="#install" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Use the stable version:</p>
<pre><code><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-0">add</span><span class="hl-1"> </span><span class="hl-0">baileys</span>
</code><button>Copy</button></pre>

<p>Use the edge version (no guarantee of stability, but latest fixes + features)</p>
<pre><code><span class="hl-0">yarn</span><span class="hl-1"> </span><span class="hl-0">add</span><span class="hl-1"> </span><span class="hl-2">github</span><span class="hl-1">:</span><span class="hl-0">WhiskeySockets</span><span class="hl-1">/</span><span class="hl-0">Baileys</span>
</code><button>Copy</button></pre>

<p>Then import the default function in your code:</p>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-0">makeWASocket</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;baileys&#39;</span>
</code><button type="button">Copy</button></pre>

<a id="links" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Links<a href="#links" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li><a href="https://discord.gg/WeJM5FP9GG">Discord</a></li>
<li><a href="https://guide.whiskeysockets.io/">Docs</a></li>
</ul>
<a id="index" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Index<a href="#index" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li>
<p><a href="#connecting-account">Connecting Account</a></p>
<ul>
<li><a href="#starting-socket-with-qr-code">Connect with QR-CODE</a></li>
<li><a href="#starting-socket-with-pairing-code">Connect with Pairing Code</a></li>
<li><a href="#receive-full-history">Receive Full History</a></li>
</ul>
</li>
<li>
<p><a href="#important-notes-about-socket-config">Important Notes About Socket Config</a></p>
<ul>
<li><a href="#caching-group-metadata-recommended">Caching Group Metadata (Recommended)</a></li>
<li><a href="#improve-retry-system--decrypt-poll-votes">Improve Retry System &amp; Decrypt Poll Votes</a></li>
<li><a href="#receive-notifications-in-whatsapp-app">Receive Notifications in Whatsapp App</a></li>
</ul>
</li>
<li>
<p><a href="#saving--restoring-sessions">Save Auth Info</a></p>
</li>
<li>
<p><a href="#handling-events">Handling Events</a></p>
<ul>
<li><a href="#example-to-start">Example to Start</a></li>
<li><a href="#decrypt-poll-votes">Decrypt Poll Votes</a></li>
<li><a href="#summary-of-events-on-first-connection">Summary of Events on First Connection</a></li>
</ul>
</li>
<li>
<p><a href="#implementing-a-data-store">Implementing a Data Store</a></p>
</li>
<li>
<p><a href="#whatsapp-ids-explain">Whatsapp IDs Explain</a></p>
</li>
<li>
<p><a href="#utility-functions">Utility Functions</a></p>
</li>
<li>
<p><a href="#sending-messages">Sending Messages</a></p>
<ul>
<li><a href="#non-media-messages">Non-Media Messages</a>
<ul>
<li><a href="#text-message">Text Message</a></li>
<li><a href="#quote-message-works-with-all-types">Quote Message</a></li>
<li><a href="#mention-user-works-with-most-types">Mention User</a></li>
<li><a href="#forward-messages">Forward Messages</a></li>
<li><a href="#location-message">Location Message</a></li>
<li><a href="#contact-message">Contact Message</a></li>
<li><a href="#reaction-message">Reaction Message</a></li>
<li><a href="#pin-message">Pin Message</a></li>
<li><a href="#poll-message">Poll Message</a></li>
</ul>
</li>
<li><a href="#sending-messages-with-link-previews">Sending with Link Preview</a></li>
<li><a href="#media-messages">Media Messages</a>
<ul>
<li><a href="#gif-message">Gif Message</a></li>
<li><a href="#video-message">Video Message</a></li>
<li><a href="#audio-message">Audio Message</a></li>
<li><a href="#image-message">Image Message</a></li>
<li><a href="#view-once-message">ViewOnce Message</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#modify-messages">Modify Messages</a></p>
<ul>
<li><a href="#deleting-messages-for-everyone">Delete Messages (for everyone)</a></li>
<li><a href="#editing-messages">Edit Messages</a></li>
</ul>
</li>
<li>
<p><a href="#manipulating-media-messages">Manipulating Media Messages</a></p>
<ul>
<li><a href="#thumbnail-in-media-messages">Thumbnail in Media Messages</a></li>
<li><a href="#downloading-media-messages">Downloading Media Messages</a></li>
<li><a href="#re-upload-media-message-to-whatsapp">Re-upload Media Message to Whatsapp</a></li>
</ul>
</li>
<li>
<p><a href="#reject-call">Reject Call</a></p>
</li>
<li>
<p><a href="#send-states-in-chat">Send States in Chat</a></p>
<ul>
<li><a href="#reading-messages">Reading Messages</a></li>
<li><a href="#update-presence">Update Presence</a></li>
</ul>
</li>
<li>
<p><a href="#modifying-chats">Modifying Chats</a></p>
<ul>
<li><a href="#archive-a-chat">Archive a Chat</a></li>
<li><a href="#muteunmute-a-chat">Mute/Unmute a Chat</a></li>
<li><a href="#mark-a-chat-readunread">Mark a Chat Read/Unread</a></li>
<li><a href="#delete-a-message-for-me">Delete a Message for Me</a></li>
<li><a href="#delete-a-chat">Delete a Chat</a></li>
<li><a href="#starunstar-a-message">Star/Unstar a Message</a></li>
<li><a href="#disappearing-messages">Disappearing Messages</a></li>
</ul>
</li>
<li>
<p><a href="#user-querys">User Querys</a></p>
<ul>
<li><a href="#check-if-id-exists-in-whatsapp">Check If ID Exists in Whatsapp</a></li>
<li><a href="#query-chat-history-groups-too">Query Chat History (groups too)</a></li>
<li><a href="#fetch-status">Fetch Status</a></li>
<li><a href="#fetch-profile-picture-groups-too">Fetch Profile Picture (groups too)</a></li>
<li><a href="#fetch-bussines-profile-such-as-description-or-category">Fetch Bussines Profile (such as description or category)</a></li>
<li><a href="#fetch-someones-presence-if-theyre-typing-or-online">Fetch Someone's Presence (if they're typing or online)</a></li>
</ul>
</li>
<li>
<p><a href="#change-profile">Change Profile</a></p>
<ul>
<li><a href="#change-profile-status">Change Profile Status</a></li>
<li><a href="#change-profile-name">Change Profile Name</a></li>
<li><a href="#change-display-picture-groups-too">Change Display Picture (groups too)</a></li>
<li><a href="#remove-display-picture-groups-too">Remove display picture (groups too)</a></li>
</ul>
</li>
<li>
<p><a href="#groups">Groups</a></p>
<ul>
<li><a href="#create-a-group">Create a Group</a></li>
<li><a href="#addremove-or-demotepromote">Add/Remove or Demote/Promote</a></li>
<li><a href="#change-subject-name">Change Subject (name)</a></li>
<li><a href="#change-description">Change Description</a></li>
<li><a href="#change-settings">Change Settings</a></li>
<li><a href="#leave-a-group">Leave a Group</a></li>
<li><a href="#get-invite-code">Get Invite Code</a></li>
<li><a href="#revoke-invite-code">Revoke Invite Code</a></li>
<li><a href="#join-using-invitation-code">Join Using Invitation Code</a></li>
<li><a href="#get-group-info-by-invite-code">Get Group Info by Invite Code</a></li>
<li><a href="#query-metadata-participants-name-description">Query Metadata (participants, name, description...)</a></li>
<li><a href="#join-using-groupinvitemessage">Join using groupInviteMessage</a></li>
<li><a href="#get-request-join-list">Get Request Join List</a></li>
<li><a href="#approvereject-request-join">Approve/Reject Request Join</a></li>
<li><a href="#get-all-participating-groups-metadata">Get All Participating Groups Metadata</a></li>
<li><a href="#toggle-ephemeral">Toggle Ephemeral</a></li>
<li><a href="#change-add-mode">Change Add Mode</a></li>
</ul>
</li>
<li>
<p><a href="#privacy">Privacy</a></p>
<ul>
<li><a href="#blockunblock-user">Block/Unblock User</a></li>
<li><a href="#get-privacy-settings">Get Privacy Settings</a></li>
<li><a href="#get-blocklist">Get BlockList</a></li>
<li><a href="#update-lastseen-privacy">Update LastSeen Privacy</a></li>
<li><a href="#update-online-privacy">Update Online Privacy</a></li>
<li><a href="#update-profile-picture-privacy">Update Profile Picture Privacy</a></li>
<li><a href="#update-status-privacy">Update Status Privacy</a></li>
<li><a href="#update-read-receipts-privacy">Update Read Receipts Privacy</a></li>
<li><a href="#update-groups-add-privacy">Update Groups Add Privacy</a></li>
<li><a href="#update-default-disappearing-mode">Update Default Disappearing Mode</a></li>
</ul>
</li>
<li>
<p><a href="#broadcast-lists--stories">Broadcast Lists &amp; Stories</a></p>
<ul>
<li><a href="#send-broadcast--stories">Send Broadcast &amp; Stories</a></li>
<li><a href="#query-a-broadcast-lists-recipients--name">Query a Broadcast List's Recipients &amp; Name</a></li>
</ul>
</li>
<li>
<p><a href="#writing-custom-functionality">Writing Custom Functionality</a></p>
<ul>
<li><a href="#enabling-debug-level-in-baileys-logs">Enabling Debug Level in Baileys Logs</a></li>
<li><a href="#how-whatsapp-communicate-with-us">How Whatsapp Communicate With Us</a></li>
<li><a href="#register-a-callback-for-websocket-events">Register a Callback for Websocket Events</a></li>
</ul>
</li>
</ul>
<a id="connecting-account" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Connecting Account<a href="#connecting-account" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>WhatsApp provides a multi-device API that allows Baileys to be authenticated as a second WhatsApp client by scanning a <strong>QR code</strong> or <strong>Pairing Code</strong> with WhatsApp on your phone.</p>
<div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
<strong><a href="#example-to-start">Here</a> is a simple example of event handling</strong></p>
</div>
<div class="tsd-alert tsd-alert-tip"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertTip"></use></svg><span>Tip</span></div><p>
<strong>You can see all supported socket configs <a href="https://baileys.whiskeysockets.io/types/SocketConfig.html">here</a> (Recommended)</strong></p>
</div>
<a id="starting-socket-with-qr-code" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Starting socket with <strong>QR-CODE</strong><a href="#starting-socket-with-qr-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-alert tsd-alert-tip"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertTip"></use></svg><span>Tip</span></div><p>
You can customize browser name if you connect with <strong>QR-CODE</strong>, with <code>Browser</code> constant, we have some browsers config, <strong>see <a href="https://baileys.whiskeysockets.io/types/BrowsersMap.html">here</a></strong></p>
</div>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-0">makeWASocket</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;baileys&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-8">// can provide additional config here</span><br/><span class="hl-1">    </span><span class="hl-0">browser:</span><span class="hl-1"> </span><span class="hl-0">Browsers</span><span class="hl-1">.</span><span class="hl-7">ubuntu</span><span class="hl-1">(</span><span class="hl-4">&#39;My App&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-0">printQRInTerminal:</span><span class="hl-1"> </span><span class="hl-5">true</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>If the connection is successful, you will see a QR code printed on your terminal screen, scan it with WhatsApp on your phone and you'll be logged in!</p>
<a id="starting-socket-with-pairing-code" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Starting socket with <strong>Pairing Code</strong><a href="#starting-socket-with-pairing-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
Pairing Code isn't Mobile API, it's a method to connect Whatsapp Web without QR-CODE, you can connect only with one device, see <a href="https://faq.whatsapp.com/1324084875126592/?cms_platform=web">here</a></p>
</div>
<p>The phone number can't have <code>+</code> or <code>()</code> or <code>-</code>, only numbers, you must provide country code</p>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-0">makeWASocket</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;baileys&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-8">// can provide additional config here</span><br/><span class="hl-1">    </span><span class="hl-0">printQRInTerminal:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> </span><span class="hl-8">//need to be false</span><br/><span class="hl-1">})</span><br/><span class="hl-8">// NOTE: WAIT TILL QR EVENT BEFORE REQUESTING THE PAIRING CODE</span><br/><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">authState</span><span class="hl-1">.</span><span class="hl-0">creds</span><span class="hl-1">.</span><span class="hl-0">registered</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">number</span><span class="hl-1"> = </span><span class="hl-4">&#39;XXXXXXXXXXX&#39;</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">code</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">requestPairingCode</span><span class="hl-1">(</span><span class="hl-0">number</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">code</span><span class="hl-1">)</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="receive-full-history" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Receive Full History<a href="#receive-full-history" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li>Set <code>syncFullHistory</code> as <code>true</code></li>
<li>Baileys, by default, use chrome browser config
<ul>
<li>If you'd like to emulate a desktop connection (and receive more message history), this browser setting to your Socket config:</li>
</ul>
</li>
</ol>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({</span><br/><span class="hl-1">    ...</span><span class="hl-0">otherOpts</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-8">// can use Windows, Ubuntu here too</span><br/><span class="hl-1">    </span><span class="hl-0">browser:</span><span class="hl-1"> </span><span class="hl-0">Browsers</span><span class="hl-1">.</span><span class="hl-7">macOS</span><span class="hl-1">(</span><span class="hl-4">&#39;Desktop&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-0">syncFullHistory:</span><span class="hl-1"> </span><span class="hl-5">true</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<a id="important-notes-about-socket-config" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Important Notes About Socket Config<a href="#important-notes-about-socket-config" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="caching-group-metadata-recommended" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Caching Group Metadata (Recommended)<a href="#caching-group-metadata-recommended" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>
<p>If you use baileys for groups, we recommend you to set <code>cachedGroupMetadata</code> in socket config, you need to implement a cache like this:</p>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">groupCache</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-7">NodeCache</span><span class="hl-1">({</span><span class="hl-0">stdTTL:</span><span class="hl-1"> </span><span class="hl-9">5</span><span class="hl-1"> * </span><span class="hl-9">60</span><span class="hl-1">, </span><span class="hl-0">useClones:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">})</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">cachedGroupMetadata</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> (</span><span class="hl-0">jid</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-0">groupCache</span><span class="hl-1">.</span><span class="hl-7">get</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;groups.update&#39;</span><span class="hl-1">, </span><span class="hl-5">async</span><span class="hl-1"> ([</span><span class="hl-0">event</span><span class="hl-1">]) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">metadata</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupMetadata</span><span class="hl-1">(</span><span class="hl-0">event</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">groupCache</span><span class="hl-1">.</span><span class="hl-7">set</span><span class="hl-1">(</span><span class="hl-0">event</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">, </span><span class="hl-0">metadata</span><span class="hl-1">)</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;group-participants.update&#39;</span><span class="hl-1">, </span><span class="hl-5">async</span><span class="hl-1"> (</span><span class="hl-0">event</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">metadata</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupMetadata</span><span class="hl-1">(</span><span class="hl-0">event</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-0">groupCache</span><span class="hl-1">.</span><span class="hl-7">set</span><span class="hl-1">(</span><span class="hl-0">event</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">, </span><span class="hl-0">metadata</span><span class="hl-1">)</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
<a id="improve-retry-system--decrypt-poll-votes" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Improve Retry System &amp; Decrypt Poll Votes<a href="#improve-retry-system--decrypt-poll-votes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>If you want to improve sending message, retrying when error occurs and decrypt poll votes, you need to have a store and set <code>getMessage</code> config in socket like this:<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-7">getMessage</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> (</span><span class="hl-0">key</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">getMessageFromStore</span><span class="hl-1">(</span><span class="hl-0">key</span><span class="hl-1">)</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
<a id="receive-notifications-in-whatsapp-app" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Receive Notifications in Whatsapp App<a href="#receive-notifications-in-whatsapp-app" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>If you want to receive notifications in whatsapp app, set <code>markOnlineOnConnect</code> to <code>false</code><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">markOnlineOnConnect:</span><span class="hl-1"> </span><span class="hl-5">false</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
<a id="saving--restoring-sessions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Saving &amp; Restoring Sessions<a href="#saving--restoring-sessions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You obviously don't want to keep scanning the QR code every time you want to connect.</p>
<p>So, you can load the credentials to log back in:</p>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-0">makeWASocket</span><span class="hl-1">, { </span><span class="hl-0">useMultiFileAuthState</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;baileys&#39;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">state</span><span class="hl-1">, </span><span class="hl-6">saveCreds</span><span class="hl-1"> } = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">useMultiFileAuthState</span><span class="hl-1">(</span><span class="hl-4">&#39;auth_info_baileys&#39;</span><span class="hl-1">)</span><br/><br/><span class="hl-8">// will use the given state to connect</span><br/><span class="hl-8">// so if valid credentials are available -- it&#39;ll connect without QR</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({ </span><span class="hl-0">auth:</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1"> })</span><br/><br/><span class="hl-8">// this will be called as soon as the credentials are updated</span><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;creds.update&#39;</span><span class="hl-1">, </span><span class="hl-0">saveCreds</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
<code>useMultiFileAuthState</code> is a utility function to help save the auth state in a single folder, this function serves as a good guide to help write auth &amp; key states for SQL/no-SQL databases, which I would recommend in any production grade system.</p>
</div>
<div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
When a message is received/sent, due to signal sessions needing updating, the auth keys (<code>authState.keys</code>) will update. Whenever that happens, you must save the updated keys (<code>authState.keys.set()</code> is called). Not doing so will prevent your messages from reaching the recipient &amp; cause other unexpected consequences. The <code>useMultiFileAuthState</code> function automatically takes care of that, but for any other serious implementation -- you will need to be very careful with the key state management.</p>
</div>
<a id="handling-events" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Handling Events<a href="#handling-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Baileys uses the EventEmitter syntax for events.
They're all nicely typed up, so you shouldn't have any issues with an Intellisense editor like VS Code.</li>
</ul>
<div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
<strong>The events are <a href="https://baileys.whiskeysockets.io/types/BaileysEventMap.html">these</a></strong>, it's important you see all events</p>
</div>
<p>You can listen to these events like this:</p>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">()</span><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;messages.upsert&#39;</span><span class="hl-1">, ({ </span><span class="hl-0">messages</span><span class="hl-1"> }) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;got messages&#39;</span><span class="hl-1">, </span><span class="hl-0">messages</span><span class="hl-1">)</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<a id="example-to-start" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example to Start<a href="#example-to-start" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
This example includes basic auth storage too</p>
</div>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-0">makeWASocket</span><span class="hl-1">, { </span><span class="hl-0">DisconnectReason</span><span class="hl-1">, </span><span class="hl-0">useMultiFileAuthState</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;baileys&#39;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-0">Boom</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;@hapi/boom&#39;</span><br/><br/><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-7">connectToWhatsApp</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">state</span><span class="hl-1">, </span><span class="hl-6">saveCreds</span><span class="hl-1"> } = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">useMultiFileAuthState</span><span class="hl-1">(</span><span class="hl-4">&#39;auth_info_baileys&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-8">// can provide additional config here</span><br/><span class="hl-1">        </span><span class="hl-0">auth:</span><span class="hl-1"> </span><span class="hl-0">state</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">printQRInTerminal:</span><span class="hl-1"> </span><span class="hl-5">true</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;connection.update&#39;</span><span class="hl-1">, (</span><span class="hl-0">update</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">connection</span><span class="hl-1">, </span><span class="hl-6">lastDisconnect</span><span class="hl-1"> } = </span><span class="hl-0">update</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">connection</span><span class="hl-1"> === </span><span class="hl-4">&#39;close&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">shouldReconnect</span><span class="hl-1"> = (</span><span class="hl-0">lastDisconnect</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-10">Boom</span><span class="hl-1">)?.</span><span class="hl-0">output</span><span class="hl-1">?.</span><span class="hl-0">statusCode</span><span class="hl-1"> !== </span><span class="hl-0">DisconnectReason</span><span class="hl-1">.</span><span class="hl-0">loggedOut</span><br/><span class="hl-1">            </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;connection closed due to &#39;</span><span class="hl-1">, </span><span class="hl-0">lastDisconnect</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">, </span><span class="hl-4">&#39;, reconnecting &#39;</span><span class="hl-1">, </span><span class="hl-0">shouldReconnect</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-8">// reconnect if not logged out</span><br/><span class="hl-1">            </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">shouldReconnect</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-7">connectToWhatsApp</span><span class="hl-1">()</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        } </span><span class="hl-3">else</span><span class="hl-1"> </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">connection</span><span class="hl-1"> === </span><span class="hl-4">&#39;open&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;opened connection&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">    </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;messages.upsert&#39;</span><span class="hl-1">, </span><span class="hl-0">event</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">m</span><span class="hl-1"> </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-0">event</span><span class="hl-1">.</span><span class="hl-0">messages</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-6">JSON</span><span class="hl-1">.</span><span class="hl-7">stringify</span><span class="hl-1">(</span><span class="hl-0">m</span><span class="hl-1">, </span><span class="hl-5">undefined</span><span class="hl-1">, </span><span class="hl-9">2</span><span class="hl-1">))</span><br/><br/><span class="hl-1">            </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;replying to&#39;</span><span class="hl-1">, </span><span class="hl-0">m</span><span class="hl-1">.</span><span class="hl-0">key</span><span class="hl-1">.</span><span class="hl-0">remoteJid</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">m</span><span class="hl-1">.</span><span class="hl-0">key</span><span class="hl-1">.</span><span class="hl-0">remoteJid</span><span class="hl-1">!, { </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;Hello Word&#39;</span><span class="hl-1"> })</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    })</span><br/><br/><span class="hl-1">    </span><span class="hl-8">// to storage creds (session info) when it updates</span><br/><span class="hl-1">    </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;creds.update&#39;</span><span class="hl-1">, </span><span class="hl-0">saveCreds</span><span class="hl-1">)</span><br/><span class="hl-1">}</span><br/><span class="hl-8">// run in main file</span><br/><span class="hl-7">connectToWhatsApp</span><span class="hl-1">()</span>
</code><button type="button">Copy</button></pre>

<div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
In <code>messages.upsert</code> it's recommended to use a loop like <code>for (const message of event.messages)</code> to handle all messages in array</p>
</div>
<a id="decrypt-poll-votes" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Decrypt Poll Votes<a href="#decrypt-poll-votes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>By default poll votes are encrypted and handled in <code>messages.update</code></li>
<li>That's a simple example</li>
</ul>
<pre><code class="ts"><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;messages.update&#39;</span><span class="hl-1">, </span><span class="hl-0">event</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">for</span><span class="hl-1">(</span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">key</span><span class="hl-1">, </span><span class="hl-6">update</span><span class="hl-1"> } </span><span class="hl-5">of</span><span class="hl-1"> </span><span class="hl-0">event</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">update</span><span class="hl-1">.</span><span class="hl-0">pollUpdates</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">pollCreation</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">getMessage</span><span class="hl-1">(</span><span class="hl-0">key</span><span class="hl-1">)</span><br/><span class="hl-1">            </span><span class="hl-3">if</span><span class="hl-1">(</span><span class="hl-0">pollCreation</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><br/><span class="hl-1">                    </span><span class="hl-4">&#39;got poll update, aggregation: &#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-7">getAggregateVotesInPollMessage</span><span class="hl-1">({</span><br/><span class="hl-1">                        </span><span class="hl-0">message:</span><span class="hl-1"> </span><span class="hl-0">pollCreation</span><span class="hl-1">,</span><br/><span class="hl-1">                        </span><span class="hl-0">pollUpdates:</span><span class="hl-1"> </span><span class="hl-0">update</span><span class="hl-1">.</span><span class="hl-0">pollUpdates</span><span class="hl-1">,</span><br/><span class="hl-1">                    })</span><br/><span class="hl-1">                )</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<ul>
<li><code>getMessage</code> is a <a href="#implementing-a-data-store">store</a> implementation (in your end)</li>
</ul>
<a id="summary-of-events-on-first-connection" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Summary of Events on First Connection<a href="#summary-of-events-on-first-connection" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li>When you connect first time, <code>connection.update</code> will be fired requesting you to restart sock</li>
<li>Then, history messages will be received in <code>messaging-history.set</code></li>
</ol>
<a id="implementing-a-data-store" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Implementing a Data Store<a href="#implementing-a-data-store" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>Baileys does not come with a defacto storage for chats, contacts, or messages. However, a simple in-memory implementation has been provided. The store listens for chat updates, new messages, message updates, etc., to always have an up-to-date version of the data.</li>
</ul>
<div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
I highly recommend building your own data store, as storing someone's entire chat history in memory is a terrible waste of RAM.</p>
</div>
<p>It can be used as follows:</p>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-0">makeWASocket</span><span class="hl-1">, { </span><span class="hl-0">makeInMemoryStore</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;baileys&#39;</span><br/><span class="hl-8">// the store maintains the data of the WA connection in memory</span><br/><span class="hl-8">// can be written out to a file &amp; read from it</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">store</span><span class="hl-1"> = </span><span class="hl-7">makeInMemoryStore</span><span class="hl-1">({ })</span><br/><span class="hl-8">// can be read from a file</span><br/><span class="hl-0">store</span><span class="hl-1">.</span><span class="hl-7">readFromFile</span><span class="hl-1">(</span><span class="hl-4">&#39;./baileys_store.json&#39;</span><span class="hl-1">)</span><br/><span class="hl-8">// saves the state to a file every 10s</span><br/><span class="hl-7">setInterval</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">store</span><span class="hl-1">.</span><span class="hl-7">writeToFile</span><span class="hl-1">(</span><span class="hl-4">&#39;./baileys_store.json&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">}, </span><span class="hl-9">10_000</span><span class="hl-1">)</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({ })</span><br/><span class="hl-8">// will listen from this socket</span><br/><span class="hl-8">// the store can listen from a new socket once the current socket outlives its lifetime</span><br/><span class="hl-0">store</span><span class="hl-1">.</span><span class="hl-7">bind</span><span class="hl-1">(</span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">)</span><br/><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;chats.upsert&#39;</span><span class="hl-1">, () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">// can use &#39;store.chats&#39; however you want, even after the socket dies out</span><br/><span class="hl-1">    </span><span class="hl-8">// &#39;chats&#39; =&gt; a KeyedDB instance</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;got chats&#39;</span><span class="hl-1">, </span><span class="hl-0">store</span><span class="hl-1">.</span><span class="hl-0">chats</span><span class="hl-1">.</span><span class="hl-7">all</span><span class="hl-1">())</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;contacts.upsert&#39;</span><span class="hl-1">, () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;got contacts&#39;</span><span class="hl-1">, </span><span class="hl-0">Object</span><span class="hl-1">.</span><span class="hl-7">values</span><span class="hl-1">(</span><span class="hl-0">store</span><span class="hl-1">.</span><span class="hl-0">contacts</span><span class="hl-1">))</span><br/><span class="hl-1">})</span><br/>
</code><button type="button">Copy</button></pre>

<p>The store also provides some simple functions such as <code>loadMessages</code> that utilize the store to speed up data retrieval.</p>
<a id="whatsapp-ids-explain" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Whatsapp IDs Explain<a href="#whatsapp-ids-explain" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>id</code> is the WhatsApp ID, called <code>jid</code> too, of the person or group you're sending the message to.
<ul>
<li>It must be in the format <code>[country code][phone number]@s.whatsapp.net</code>
<ul>
<li>Example for people: <code>+19999999999@s.whatsapp.net</code>.</li>
<li>For groups, it must be in the format <code>123456789-123345@g.us</code>.</li>
</ul>
</li>
<li>For broadcast lists, it's <code>[timestamp of creation]@broadcast</code>.</li>
<li>For stories, the ID is <code>status@broadcast</code>.</li>
</ul>
</li>
</ul>
<a id="utility-functions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Utility Functions<a href="#utility-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><code>getContentType</code>, returns the content type for any message</li>
<li><code>getDevice</code>, returns the device from message</li>
<li><code>makeCacheableSignalKeyStore</code>, make auth store more fast</li>
<li><code>downloadContentFromMessage</code>, download content from any message</li>
</ul>
<a id="sending-messages" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Sending Messages<a href="#sending-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>
<p>Send all types of messages with a single function</p>
<ul>
<li><strong><a href="https://baileys.whiskeysockets.io/types/AnyMessageContent.html">Here</a> you can see all message contents supported, like text message</strong></li>
<li><strong><a href="https://baileys.whiskeysockets.io/types/MiscMessageGenerationOptions.html">Here</a> you can see all options supported, like quote message</strong></li>
</ul>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">jid</span><span class="hl-1">: </span><span class="hl-10">string</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">content</span><span class="hl-1">: </span><span class="hl-10">AnyMessageContent</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">options</span><span class="hl-1">: </span><span class="hl-10">MiscMessageGenerationOptions</span><br/><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-0">content</span><span class="hl-1">, </span><span class="hl-0">options</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
<a id="non-media-messages" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Non-Media Messages<a href="#non-media-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><a id="text-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Text Message<a href="#text-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, { </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello word&#39;</span><span class="hl-1"> })</span>
</code><button type="button">Copy</button></pre>

<a id="quote-message-works-with-all-types" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Quote Message (works with all types)<a href="#quote-message-works-with-all-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, { </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello word&#39;</span><span class="hl-1"> }, { </span><span class="hl-0">quoted:</span><span class="hl-1"> </span><span class="hl-0">message</span><span class="hl-1"> })</span>
</code><button type="button">Copy</button></pre>

<a id="mention-user-works-with-most-types" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Mention User (works with most types)<a href="#mention-user-works-with-most-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li>@number is to mention in text, it's optional</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;@12345678901&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">mentions:</span><span class="hl-1"> [</span><span class="hl-4">&#39;12345678901@s.whatsapp.net&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="forward-messages" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Forward Messages<a href="#forward-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li>You need to have message object, can be retrieved from <a href="#implementing-a-data-store">store</a> or use a <a href="https://baileys.whiskeysockets.io/types/WAMessage.html">message</a> object</li>
</ul>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">msg</span><span class="hl-1"> = </span><span class="hl-7">getMessageFromStore</span><span class="hl-1">() </span><span class="hl-8">// implement this on your end</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, { </span><span class="hl-0">forward:</span><span class="hl-1"> </span><span class="hl-0">msg</span><span class="hl-1"> }) </span><span class="hl-8">// WA forward the message!</span>
</code><button type="button">Copy</button></pre>

<a id="location-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Location Message<a href="#location-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">, </span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">location:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">degreesLatitude:</span><span class="hl-1"> </span><span class="hl-9">24.121231</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-0">degreesLongitude:</span><span class="hl-1"> </span><span class="hl-9">55.1121221</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="contact-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Contact Message<a href="#contact-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">vcard</span><span class="hl-1"> = </span><span class="hl-4">&#39;BEGIN:VCARD</span><span class="hl-11">\n</span><span class="hl-4">&#39;</span><span class="hl-1"> </span><span class="hl-8">// metadata of the contact card</span><br/><span class="hl-1">            + </span><span class="hl-4">&#39;VERSION:3.0</span><span class="hl-11">\n</span><span class="hl-4">&#39;</span><span class="hl-1"> </span><br/><span class="hl-1">            + </span><span class="hl-4">&#39;FN:Jeff Singh</span><span class="hl-11">\n</span><span class="hl-4">&#39;</span><span class="hl-1"> </span><span class="hl-8">// full name</span><br/><span class="hl-1">            + </span><span class="hl-4">&#39;ORG:Ashoka Uni;</span><span class="hl-11">\n</span><span class="hl-4">&#39;</span><span class="hl-1"> </span><span class="hl-8">// the organization of the contact</span><br/><span class="hl-1">            + </span><span class="hl-4">&#39;TEL;type=CELL;type=VOICE;waid=911234567890:+91 12345 67890</span><span class="hl-11">\n</span><span class="hl-4">&#39;</span><span class="hl-1"> </span><span class="hl-8">// WhatsApp ID + phone number</span><br/><span class="hl-1">            + </span><span class="hl-4">&#39;END:VCARD&#39;</span><br/><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">id</span><span class="hl-1">,</span><br/><span class="hl-1">    { </span><br/><span class="hl-1">        </span><span class="hl-0">contacts:</span><span class="hl-1"> { </span><br/><span class="hl-1">            </span><span class="hl-0">displayName:</span><span class="hl-1"> </span><span class="hl-4">&#39;Jeff&#39;</span><span class="hl-1">, </span><br/><span class="hl-1">            </span><span class="hl-0">contacts:</span><span class="hl-1"> [{ </span><span class="hl-0">vcard</span><span class="hl-1"> }] </span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="reaction-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Reaction Message<a href="#reaction-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li>You need to pass the key of message, you can retrieve from <a href="#implementing-a-data-store">store</a> or use a <a href="https://baileys.whiskeysockets.io/types/WAMessageKey.html">key</a> object</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">react:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;&#39;</span><span class="hl-1">, </span><span class="hl-8">// use an empty string to remove the reaction</span><br/><span class="hl-1">            </span><span class="hl-0">key:</span><span class="hl-1"> </span><span class="hl-0">message</span><span class="hl-1">.</span><span class="hl-0">key</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="pin-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Pin Message<a href="#pin-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li>
<p>You need to pass the key of message, you can retrieve from <a href="#implementing-a-data-store">store</a> or use a <a href="https://baileys.whiskeysockets.io/types/WAMessageKey.html">key</a> object</p>
</li>
<li>
<p>Time can be:</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>24h</td>
<td>86.400</td>
</tr>
<tr>
<td>7d</td>
<td>604.800</td>
</tr>
<tr>
<td>30d</td>
<td>2.592.000</td>
</tr>
</tbody>
</table>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">pin:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">type:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">, </span><span class="hl-8">// 0 to remove</span><br/><span class="hl-1">            </span><span class="hl-0">time:</span><span class="hl-1"> </span><span class="hl-9">86400</span><br/><span class="hl-1">            </span><span class="hl-0">key</span><span class="hl-1">: </span><span class="hl-0">message</span><span class="hl-1">.</span><span class="hl-0">key</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="poll-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Poll Message<a href="#poll-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">poll:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">name:</span><span class="hl-1"> </span><span class="hl-4">&#39;My Poll&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-0">values:</span><span class="hl-1"> [</span><span class="hl-4">&#39;Option 1&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;Option 2&#39;</span><span class="hl-1">, ...],</span><br/><span class="hl-1">            </span><span class="hl-0">selectableCount:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-0">toAnnouncementGroup:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> </span><span class="hl-8">// or true</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="sending-messages-with-link-previews" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Sending Messages with Link Previews<a href="#sending-messages-with-link-previews" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li>By default, wa does not have link generation when sent from the web</li>
<li>Baileys has a function to generate the content for these link previews</li>
<li>To enable this function's usage, add <code>link-preview-js</code> as a dependency to your project with <code>yarn add link-preview-js</code></li>
<li>Send a link:</li>
</ol>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;Hi, this was sent using https://github.com/whiskeysockets/baileys&#39;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="media-messages" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Media Messages<a href="#media-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Sending media (video, stickers, images) is easier &amp; more efficient than ever.</p>
<div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
In media messages, you can pass <code>{ stream: Stream }</code> or <code>{ url: Url }</code> or <code>Buffer</code> directly, you can see more <a href="https://baileys.whiskeysockets.io/types/WAMediaUpload.html">here</a></p>
</div>
<ul>
<li>When specifying a media url, Baileys never loads the entire buffer into memory; it even encrypts the media as a readable stream.</li>
</ul>
<div class="tsd-alert tsd-alert-tip"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertTip"></use></svg><span>Tip</span></div><p>
It's recommended to use Stream or Url to save memory</p>
</div>
<a id="gif-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Gif Message<a href="#gif-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li>Whatsapp doesn't support <code>.gif</code> files, that's why we send gifs as common <code>.mp4</code> video with <code>gifPlayback</code> flag</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">, </span><br/><span class="hl-1">    { </span><br/><span class="hl-1">        </span><span class="hl-0">video:</span><span class="hl-1"> </span><span class="hl-0">fs</span><span class="hl-1">.</span><span class="hl-7">readFileSync</span><span class="hl-1">(</span><span class="hl-4">&#39;Media/ma_gif.mp4&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">        </span><span class="hl-0">caption:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello word&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">gifPlayback:</span><span class="hl-1"> </span><span class="hl-5">true</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="video-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Video Message<a href="#video-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">id</span><span class="hl-1">, </span><br/><span class="hl-1">    { </span><br/><span class="hl-1">        </span><span class="hl-0">video:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-4">&#39;./Media/ma_gif.mp4&#39;</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-0">caption:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello word&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">	    </span><span class="hl-0">ptv:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> </span><span class="hl-8">// if set to true, will send as a `video note`</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="audio-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Audio Message<a href="#audio-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li>To audio message work in all devices you need to convert with some tool like <code>ffmpeg</code> with this flags:<pre><code class="bash"><span class="hl-1">    </span><span class="hl-7">codec:</span><span class="hl-1"> </span><span class="hl-4">libopus</span><span class="hl-1"> </span><span class="hl-4">//ogg</span><span class="hl-1"> </span><span class="hl-4">file</span><br/><span class="hl-1">    </span><span class="hl-7">ac:</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1"> </span><span class="hl-4">//one</span><span class="hl-1"> </span><span class="hl-4">channel</span><br/><span class="hl-1">    </span><span class="hl-7">avoid_negative_ts</span><br/><span class="hl-1">    </span><span class="hl-7">make_zero</span>
</code><button type="button">Copy</button></pre>

<ul>
<li>Example:</li>
</ul>
<pre><code class="bash"><span class="hl-7">ffmpeg</span><span class="hl-1"> </span><span class="hl-5">-i</span><span class="hl-1"> </span><span class="hl-4">input.mp4</span><span class="hl-1"> </span><span class="hl-5">-avoid_negative_ts</span><span class="hl-1"> </span><span class="hl-4">make_zero</span><span class="hl-1"> </span><span class="hl-5">-ac</span><span class="hl-1"> </span><span class="hl-9">1</span><span class="hl-1"> </span><span class="hl-4">output.ogg</span>
</code><button type="button">Copy</button></pre>

</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">, </span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">audio:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-4">&#39;./Media/audio.mp3&#39;</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-0">mimetype:</span><span class="hl-1"> </span><span class="hl-4">&#39;audio/mp4&#39;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="image-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Image Message<a href="#image-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">id</span><span class="hl-1">, </span><br/><span class="hl-1">    { </span><br/><span class="hl-1">        </span><span class="hl-0">image:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-4">&#39;./Media/ma_img.png&#39;</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-0">caption:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello word&#39;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="view-once-message" class="tsd-anchor"></a><h4 class="tsd-anchor-link">View Once Message<a href="#view-once-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h4><ul>
<li>You can send all messages above as <code>viewOnce</code>, you only need to pass <code>viewOnce: true</code> in content object</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">id</span><span class="hl-1">, </span><br/><span class="hl-1">    { </span><br/><span class="hl-1">        </span><span class="hl-0">image:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-4">&#39;./Media/ma_img.png&#39;</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-0">viewOnce:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">, </span><span class="hl-8">//works with video, audio too</span><br/><span class="hl-1">        </span><span class="hl-0">caption:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello word&#39;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="modify-messages" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Modify Messages<a href="#modify-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="deleting-messages-for-everyone" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Deleting Messages (for everyone)<a href="#deleting-messages-for-everyone" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">msg</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, { </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello word&#39;</span><span class="hl-1"> })</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, { </span><span class="hl-0">delete:</span><span class="hl-1"> </span><span class="hl-0">msg</span><span class="hl-1">.</span><span class="hl-0">key</span><span class="hl-1"> })</span>
</code><button type="button">Copy</button></pre>

<p><strong>Note:</strong> deleting for oneself is supported via <code>chatModify</code>, see in <a href="#modifying-chats">this section</a></p>
<a id="editing-messages" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Editing Messages<a href="#editing-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>You can pass all editable contents here</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;updated text goes here&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-0">edit:</span><span class="hl-1"> </span><span class="hl-0">response</span><span class="hl-1">.</span><span class="hl-0">key</span><span class="hl-1">,</span><br/><span class="hl-1">    });</span>
</code><button type="button">Copy</button></pre>

<a id="manipulating-media-messages" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Manipulating Media Messages<a href="#manipulating-media-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="thumbnail-in-media-messages" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Thumbnail in Media Messages<a href="#thumbnail-in-media-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>For media messages, the thumbnail can be generated automatically for images &amp; stickers provided you add <code>jimp</code> or <code>sharp</code> as a dependency in your project using <code>yarn add jimp</code> or <code>yarn add sharp</code>.</li>
<li>Thumbnails for videos can also be generated automatically, though, you need to have <code>ffmpeg</code> installed on your system.</li>
</ul>
<a id="downloading-media-messages" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Downloading Media Messages<a href="#downloading-media-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If you want to save the media you received</p>
<pre><code class="ts"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-0">createWriteStream</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;fs&#39;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-0">downloadMediaMessage</span><span class="hl-1">, </span><span class="hl-0">getContentType</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-4">&#39;baileys&#39;</span><br/><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;messages.upsert&#39;</span><span class="hl-1">, </span><span class="hl-5">async</span><span class="hl-1"> ({ [</span><span class="hl-0">m</span><span class="hl-1">] }) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-0">m</span><span class="hl-1">.</span><span class="hl-0">message</span><span class="hl-1">) </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-8">// if there is no text or media message</span><br/><span class="hl-1">    </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">messageType</span><span class="hl-1"> = </span><span class="hl-7">getContentType</span><span class="hl-1">(</span><span class="hl-0">m</span><span class="hl-1">) </span><span class="hl-8">// get what type of message it is (text, image, video...)</span><br/><br/><span class="hl-1">    </span><span class="hl-8">// if the message is an image</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">messageType</span><span class="hl-1"> === </span><span class="hl-4">&#39;imageMessage&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-8">// download the message</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">stream</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">downloadMediaMessage</span><span class="hl-1">(</span><br/><span class="hl-1">            </span><span class="hl-0">m</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-4">&#39;stream&#39;</span><span class="hl-1">, </span><span class="hl-8">// can be &#39;buffer&#39; too</span><br/><span class="hl-1">            { },</span><br/><span class="hl-1">            { </span><br/><span class="hl-1">                </span><span class="hl-0">logger</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-8">// pass this so that baileys can request a reupload of media</span><br/><span class="hl-1">                </span><span class="hl-8">// that has been deleted</span><br/><span class="hl-1">                </span><span class="hl-0">reuploadRequest:</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">updateMediaMessage</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        )</span><br/><span class="hl-1">        </span><span class="hl-8">// save to file</span><br/><span class="hl-1">        </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">writeStream</span><span class="hl-1"> = </span><span class="hl-7">createWriteStream</span><span class="hl-1">(</span><span class="hl-4">&#39;./my-download.jpeg&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-0">stream</span><span class="hl-1">.</span><span class="hl-7">pipe</span><span class="hl-1">(</span><span class="hl-0">writeStream</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="re-upload-media-message-to-whatsapp" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Re-upload Media Message to Whatsapp<a href="#re-upload-media-message-to-whatsapp" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>WhatsApp automatically removes old media from their servers. For the device to access said media -- a re-upload is required by another device that has it. This can be accomplished using:</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateMediaMessage</span><span class="hl-1">(</span><span class="hl-0">msg</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="reject-call" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Reject Call<a href="#reject-call" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>You can obtain <code>callId</code> and <code>callFrom</code> from <code>call</code> event</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">rejectCall</span><span class="hl-1">(</span><span class="hl-0">callId</span><span class="hl-1">, </span><span class="hl-0">callFrom</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="send-states-in-chat" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Send States in Chat<a href="#send-states-in-chat" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="reading-messages" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Reading Messages<a href="#reading-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>A set of message <a href="https://baileys.whiskeysockets.io/types/WAMessageKey.html">keys</a> must be explicitly marked read now.</li>
<li>You cannot mark an entire 'chat' read as it were with Baileys Web.
This means you have to keep track of unread messages.</li>
</ul>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">key</span><span class="hl-1">: </span><span class="hl-10">WAMessageKey</span><br/><span class="hl-8">// can pass multiple keys to read multiple messages as well</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">readMessages</span><span class="hl-1">([</span><span class="hl-0">key</span><span class="hl-1">])</span>
</code><button type="button">Copy</button></pre>

<p>The message ID is the unique identifier of the message that you are marking as read.
On a <code>WAMessage</code>, the <code>messageID</code> can be accessed using <code>messageID = message.key.id</code>.</p>
<a id="update-presence" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Update Presence<a href="#update-presence" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>presence</code> can be one of <a href="https://baileys.whiskeysockets.io/types/WAPresence.html">these</a></li>
<li>The presence expires after about 10 seconds.</li>
<li>This lets the person/group with <code>jid</code> know whether you're online, offline, typing etc.</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendPresenceUpdate</span><span class="hl-1">(</span><span class="hl-4">&#39;available&#39;</span><span class="hl-1">, </span><span class="hl-0">jid</span><span class="hl-1">) </span>
</code><button type="button">Copy</button></pre>

<div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
If a desktop client is active, WA doesn't send push notifications to the device. If you would like to receive said notifications -- mark your Baileys client offline using <code>sock.sendPresenceUpdate('unavailable')</code></p>
</div>
<a id="modifying-chats" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Modifying Chats<a href="#modifying-chats" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>WA uses an encrypted form of communication to send chat/app updates. This has been implemented mostly and you can send the following updates:</p>
<div class="tsd-alert tsd-alert-important"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertImportant"></use></svg><span>Important</span></div><p>
If you mess up one of your updates, WA can log you out of all your devices and you'll have to log in again.</p>
</div>
<a id="archive-a-chat" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Archive a Chat<a href="#archive-a-chat" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">lastMsgInChat</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">getLastMessageInChat</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">) </span><span class="hl-8">// implement this on your end</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">chatModify</span><span class="hl-1">({ </span><span class="hl-0">archive:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">, </span><span class="hl-0">lastMessages:</span><span class="hl-1"> [</span><span class="hl-0">lastMsgInChat</span><span class="hl-1">] }, </span><span class="hl-0">jid</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="muteunmute-a-chat" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Mute/Unmute a Chat<a href="#muteunmute-a-chat" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Supported times:</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Miliseconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove</td>
<td>null</td>
</tr>
<tr>
<td>8h</td>
<td>86.400.000</td>
</tr>
<tr>
<td>7d</td>
<td>604.800.000</td>
</tr>
</tbody>
</table>
<pre><code class="ts"><span class="hl-8">// mute for 8 hours</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">chatModify</span><span class="hl-1">({ </span><span class="hl-0">mute:</span><span class="hl-1"> </span><span class="hl-9">8</span><span class="hl-1"> * </span><span class="hl-9">60</span><span class="hl-1"> * </span><span class="hl-9">60</span><span class="hl-1"> * </span><span class="hl-9">1000</span><span class="hl-1"> }, </span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-8">// unmute</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">chatModify</span><span class="hl-1">({ </span><span class="hl-0">mute:</span><span class="hl-1"> </span><span class="hl-5">null</span><span class="hl-1"> }, </span><span class="hl-0">jid</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="mark-a-chat-readunread" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Mark a Chat Read/Unread<a href="#mark-a-chat-readunread" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">lastMsgInChat</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">getLastMessageInChat</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">) </span><span class="hl-8">// implement this on your end</span><br/><span class="hl-8">// mark it unread</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">chatModify</span><span class="hl-1">({ </span><span class="hl-0">markRead:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">, </span><span class="hl-0">lastMessages:</span><span class="hl-1"> [</span><span class="hl-0">lastMsgInChat</span><span class="hl-1">] }, </span><span class="hl-0">jid</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="delete-a-message-for-me" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Delete a Message for Me<a href="#delete-a-message-for-me" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">chatModify</span><span class="hl-1">(</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">clear:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">messages:</span><span class="hl-1"> [</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-4">&#39;ATWYHDNNWU81732J&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-0">fromMe:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">, </span><br/><span class="hl-1">                    </span><span class="hl-0">timestamp:</span><span class="hl-1"> </span><span class="hl-4">&#39;1654823909&#39;</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            ]</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }, </span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><br/><span class="hl-1">)</span><br/>
</code><button type="button">Copy</button></pre>

<a id="delete-a-chat" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Delete a Chat<a href="#delete-a-chat" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">lastMsgInChat</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">getLastMessageInChat</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">) </span><span class="hl-8">// implement this on your end</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">chatModify</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-0">delete:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">lastMessages:</span><span class="hl-1"> [</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-0">key:</span><span class="hl-1"> </span><span class="hl-0">lastMsgInChat</span><span class="hl-1">.</span><span class="hl-0">key</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-0">messageTimestamp:</span><span class="hl-1"> </span><span class="hl-0">lastMsgInChat</span><span class="hl-1">.</span><span class="hl-0">messageTimestamp</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        ]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="pinunpin-a-chat" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Pin/Unpin a Chat<a href="#pinunpin-a-chat" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">chatModify</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-0">pin:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> </span><span class="hl-8">// or `false` to unpin</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="starunstar-a-message" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Star/Unstar a Message<a href="#starunstar-a-message" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">chatModify</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-0">star:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">messages:</span><span class="hl-1"> [</span><br/><span class="hl-1">                {</span><br/><span class="hl-1">                    </span><span class="hl-0">id:</span><span class="hl-1"> </span><span class="hl-4">&#39;messageID&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                    </span><span class="hl-0">fromMe:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> </span><span class="hl-8">// or `false`</span><br/><span class="hl-1">                }</span><br/><span class="hl-1">            ],</span><br/><span class="hl-1">            </span><span class="hl-0">star:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1"> </span><span class="hl-8">// - true: Star Message; false: Unstar Message</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="disappearing-messages" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Disappearing Messages<a href="#disappearing-messages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Ephemeral can be:</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove</td>
<td>0</td>
</tr>
<tr>
<td>24h</td>
<td>86.400</td>
</tr>
<tr>
<td>7d</td>
<td>604.800</td>
</tr>
<tr>
<td>90d</td>
<td>7.776.000</td>
</tr>
</tbody>
</table>
<ul>
<li>You need to pass in <strong>Seconds</strong>, default is 7 days</li>
</ul>
<pre><code class="ts"><span class="hl-8">// turn on disappearing messages</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">, </span><br/><span class="hl-1">    </span><span class="hl-8">// this is 1 week in seconds -- how long you want messages to appear for</span><br/><span class="hl-1">    { </span><span class="hl-0">disappearingMessagesInChat:</span><span class="hl-1"> </span><span class="hl-6">WA_DEFAULT_EPHEMERAL</span><span class="hl-1"> }</span><br/><span class="hl-1">)</span><br/><br/><span class="hl-8">// will send as a disappearing message</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, { </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello&#39;</span><span class="hl-1"> }, { </span><span class="hl-0">ephemeralExpiration:</span><span class="hl-1"> </span><span class="hl-6">WA_DEFAULT_EPHEMERAL</span><span class="hl-1"> })</span><br/><br/><span class="hl-8">// turn off disappearing messages</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">, </span><br/><span class="hl-1">    { </span><span class="hl-0">disappearingMessagesInChat:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1"> }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="user-querys" class="tsd-anchor"></a><h2 class="tsd-anchor-link">User Querys<a href="#user-querys" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="check-if-id-exists-in-whatsapp" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Check If ID Exists in Whatsapp<a href="#check-if-id-exists-in-whatsapp" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> [</span><span class="hl-6">result</span><span class="hl-1">] = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">onWhatsApp</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-0">result</span><span class="hl-1">.</span><span class="hl-0">exists</span><span class="hl-1">) </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1"> (</span><span class="hl-4">`</span><span class="hl-5">${</span><span class="hl-0">jid</span><span class="hl-5">}</span><span class="hl-4"> exists on WhatsApp, as jid: </span><span class="hl-5">${</span><span class="hl-0">result</span><span class="hl-12">.</span><span class="hl-0">jid</span><span class="hl-5">}</span><span class="hl-4">`</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="query-chat-history-groups-too" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Query Chat History (groups too)<a href="#query-chat-history-groups-too" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>You need to have oldest message in chat</li>
</ul>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">msg</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">getOldestMessageInChat</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">fetchMessageHistory</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-9">50</span><span class="hl-1">, </span><span class="hl-8">//quantity (max: 50 per query)</span><br/><span class="hl-1">    </span><span class="hl-0">msg</span><span class="hl-1">.</span><span class="hl-0">key</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">msg</span><span class="hl-1">.</span><span class="hl-0">messageTimestamp</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<ul>
<li>Messages will be received in <code>messaging-history.set</code> event</li>
</ul>
<a id="fetch-status" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fetch Status<a href="#fetch-status" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">status</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">fetchStatus</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;status: &#39;</span><span class="hl-1"> + </span><span class="hl-0">status</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="fetch-profile-picture-groups-too" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fetch Profile Picture (groups too)<a href="#fetch-profile-picture-groups-too" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>To get the display picture of some person/group</li>
</ul>
<pre><code class="ts"><span class="hl-8">// for low res picture</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ppUrl</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">profilePictureUrl</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">ppUrl</span><span class="hl-1">)</span><br/><br/><span class="hl-8">// for high res picture</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ppUrl</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">profilePictureUrl</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;image&#39;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="fetch-bussines-profile-such-as-description-or-category" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fetch Bussines Profile (such as description or category)<a href="#fetch-bussines-profile-such-as-description-or-category" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">profile</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">getBusinessProfile</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;business description: &#39;</span><span class="hl-1"> + </span><span class="hl-0">profile</span><span class="hl-1">.</span><span class="hl-0">description</span><span class="hl-1"> + </span><span class="hl-4">&#39;, category: &#39;</span><span class="hl-1"> + </span><span class="hl-0">profile</span><span class="hl-1">.</span><span class="hl-0">category</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="fetch-someones-presence-if-theyre-typing-or-online" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fetch Someone's Presence (if they're typing or online)<a href="#fetch-someones-presence-if-theyre-typing-or-online" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-8">// the presence update is fetched and called here</span><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ev</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;presence.update&#39;</span><span class="hl-1">, </span><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">)</span><br/><br/><span class="hl-8">// request updates for a chat</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">presenceSubscribe</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">) </span>
</code><button type="button">Copy</button></pre>

<a id="change-profile" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Change Profile<a href="#change-profile" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="change-profile-status" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Change Profile Status<a href="#change-profile-status" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateProfileStatus</span><span class="hl-1">(</span><span class="hl-4">&#39;Hello World!&#39;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="change-profile-name" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Change Profile Name<a href="#change-profile-name" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateProfileName</span><span class="hl-1">(</span><span class="hl-4">&#39;My name&#39;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="change-display-picture-groups-too" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Change Display Picture (groups too)<a href="#change-display-picture-groups-too" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>To change your display picture or a group's</li>
</ul>
<div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
Like media messages, you can pass <code>{ stream: Stream }</code> or <code>{ url: Url }</code> or <code>Buffer</code> directly, you can see more <a href="https://baileys.whiskeysockets.io/types/WAMediaUpload.html">here</a></p>
</div>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateProfilePicture</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, { </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-4">&#39;./new-profile-picture.jpeg&#39;</span><span class="hl-1"> })</span>
</code><button type="button">Copy</button></pre>

<a id="remove-display-picture-groups-too" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Remove display picture (groups too)<a href="#remove-display-picture-groups-too" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">removeProfilePicture</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="groups" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Groups<a href="#groups" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li>To change group properties you need to be admin</li>
</ul>
<a id="create-a-group" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Create a Group<a href="#create-a-group" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-8">// title &amp; participants</span><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">group</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupCreate</span><span class="hl-1">(</span><span class="hl-4">&#39;My Fab Group&#39;</span><span class="hl-1">, [</span><span class="hl-4">&#39;1234@s.whatsapp.net&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;4564@s.whatsapp.net&#39;</span><span class="hl-1">])</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;created group with id: &#39;</span><span class="hl-1"> + </span><span class="hl-0">group</span><span class="hl-1">.</span><span class="hl-0">gid</span><span class="hl-1">)</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><span class="hl-0">group</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1">, { </span><span class="hl-0">text:</span><span class="hl-1"> </span><span class="hl-4">&#39;hello there&#39;</span><span class="hl-1"> }) </span><span class="hl-8">// say hello to everyone on the group</span>
</code><button type="button">Copy</button></pre>

<a id="addremove-or-demotepromote" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Add/Remove or Demote/Promote<a href="#addremove-or-demotepromote" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-8">// id &amp; people to add to the group (will throw error if it fails)</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupParticipantsUpdate</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">, </span><br/><span class="hl-1">    [</span><span class="hl-4">&#39;abcd@s.whatsapp.net&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;efgh@s.whatsapp.net&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">&#39;add&#39;</span><span class="hl-1"> </span><span class="hl-8">// replace this parameter with &#39;remove&#39; or &#39;demote&#39; or &#39;promote&#39;</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="change-subject-name" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Change Subject (name)<a href="#change-subject-name" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupUpdateSubject</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;New Subject!&#39;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="change-description" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Change Description<a href="#change-description" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupUpdateDescription</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;New Description!&#39;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="change-settings" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Change Settings<a href="#change-settings" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-8">// only allow admins to send messages</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupSettingUpdate</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;announcement&#39;</span><span class="hl-1">)</span><br/><span class="hl-8">// allow everyone to send messages</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupSettingUpdate</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;not_announcement&#39;</span><span class="hl-1">)</span><br/><span class="hl-8">// allow everyone to modify the group&#39;s settings -- like display picture etc.</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupSettingUpdate</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;unlocked&#39;</span><span class="hl-1">)</span><br/><span class="hl-8">// only allow admins to modify the group&#39;s settings</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupSettingUpdate</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;locked&#39;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="leave-a-group" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Leave a Group<a href="#leave-a-group" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-8">// will throw error if it fails</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupLeave</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="get-invite-code" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Get Invite Code<a href="#get-invite-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>To create link with code use <code>'https://chat.whatsapp.com/' + code</code></li>
</ul>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">code</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupInviteCode</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;group code: &#39;</span><span class="hl-1"> + </span><span class="hl-0">code</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="revoke-invite-code" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Revoke Invite Code<a href="#revoke-invite-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">code</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupRevokeInvite</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;New group code: &#39;</span><span class="hl-1"> + </span><span class="hl-0">code</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="join-using-invitation-code" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Join Using Invitation Code<a href="#join-using-invitation-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Code can't have <code>https://chat.whatsapp.com/</code>, only code</li>
</ul>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupAcceptInvite</span><span class="hl-1">(</span><span class="hl-0">code</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;joined to: &#39;</span><span class="hl-1"> + </span><span class="hl-0">response</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="get-group-info-by-invite-code" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Get Group Info by Invite Code<a href="#get-group-info-by-invite-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupGetInviteInfo</span><span class="hl-1">(</span><span class="hl-0">code</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;group information: &#39;</span><span class="hl-1"> + </span><span class="hl-0">response</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="query-metadata-participants-name-description" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Query Metadata (participants, name, description...)<a href="#query-metadata-participants-name-description" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">metadata</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupMetadata</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">) </span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">metadata</span><span class="hl-1">.</span><span class="hl-0">id</span><span class="hl-1"> + </span><span class="hl-4">&#39;, title: &#39;</span><span class="hl-1"> + </span><span class="hl-0">metadata</span><span class="hl-1">.</span><span class="hl-0">subject</span><span class="hl-1"> + </span><span class="hl-4">&#39;, description: &#39;</span><span class="hl-1"> + </span><span class="hl-0">metadata</span><span class="hl-1">.</span><span class="hl-0">desc</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="join-using-groupinvitemessage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Join using <code>groupInviteMessage</code><a href="#join-using-groupinvitemessage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupAcceptInviteV4</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-0">groupInviteMessage</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;joined to: &#39;</span><span class="hl-1"> + </span><span class="hl-0">response</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="get-request-join-list" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Get Request Join List<a href="#get-request-join-list" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupRequestParticipantsList</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="approvereject-request-join" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Approve/Reject Request Join<a href="#approvereject-request-join" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupRequestParticipantsUpdate</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-8">// group id</span><br/><span class="hl-1">    [</span><span class="hl-4">&#39;abcd@s.whatsapp.net&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;efgh@s.whatsapp.net&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">&#39;approve&#39;</span><span class="hl-1"> </span><span class="hl-8">// or &#39;reject&#39; </span><br/><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="get-all-participating-groups-metadata" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Get All Participating Groups Metadata<a href="#get-all-participating-groups-metadata" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupFetchAllParticipating</span><span class="hl-1">()</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="toggle-ephemeral" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Toggle Ephemeral<a href="#toggle-ephemeral" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Ephemeral can be:</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove</td>
<td>0</td>
</tr>
<tr>
<td>24h</td>
<td>86.400</td>
</tr>
<tr>
<td>7d</td>
<td>604.800</td>
</tr>
<tr>
<td>90d</td>
<td>7.776.000</td>
</tr>
</tbody>
</table>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupToggleEphemeral</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-9">86400</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="change-add-mode" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Change Add Mode<a href="#change-add-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">groupMemberAddMode</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">&#39;all_member_add&#39;</span><span class="hl-1"> </span><span class="hl-8">// or &#39;admin_add&#39;</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="privacy" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Privacy<a href="#privacy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="blockunblock-user" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Block/Unblock User<a href="#blockunblock-user" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateBlockStatus</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;block&#39;</span><span class="hl-1">) </span><span class="hl-8">// Block user</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateBlockStatus</span><span class="hl-1">(</span><span class="hl-0">jid</span><span class="hl-1">, </span><span class="hl-4">&#39;unblock&#39;</span><span class="hl-1">) </span><span class="hl-8">// Unblock user</span>
</code><button type="button">Copy</button></pre>

<a id="get-privacy-settings" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Get Privacy Settings<a href="#get-privacy-settings" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">privacySettings</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">fetchPrivacySettings</span><span class="hl-1">(</span><span class="hl-5">true</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-4">&#39;privacy settings: &#39;</span><span class="hl-1"> + </span><span class="hl-0">privacySettings</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="get-blocklist" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Get BlockList<a href="#get-blocklist" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">response</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">fetchBlocklist</span><span class="hl-1">()</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1">(</span><span class="hl-0">response</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="update-lastseen-privacy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Update LastSeen Privacy<a href="#update-lastseen-privacy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">value</span><span class="hl-1"> = </span><span class="hl-4">&#39;all&#39;</span><span class="hl-1"> </span><span class="hl-8">// &#39;contacts&#39; | &#39;contact_blacklist&#39; | &#39;none&#39;</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateLastSeenPrivacy</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="update-online-privacy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Update Online Privacy<a href="#update-online-privacy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">value</span><span class="hl-1"> = </span><span class="hl-4">&#39;all&#39;</span><span class="hl-1"> </span><span class="hl-8">// &#39;match_last_seen&#39;</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateOnlinePrivacy</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="update-profile-picture-privacy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Update Profile Picture Privacy<a href="#update-profile-picture-privacy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">value</span><span class="hl-1"> = </span><span class="hl-4">&#39;all&#39;</span><span class="hl-1"> </span><span class="hl-8">// &#39;contacts&#39; | &#39;contact_blacklist&#39; | &#39;none&#39;</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateProfilePicturePrivacy</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="update-status-privacy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Update Status Privacy<a href="#update-status-privacy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">value</span><span class="hl-1"> = </span><span class="hl-4">&#39;all&#39;</span><span class="hl-1"> </span><span class="hl-8">// &#39;contacts&#39; | &#39;contact_blacklist&#39; | &#39;none&#39;</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateStatusPrivacy</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="update-read-receipts-privacy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Update Read Receipts Privacy<a href="#update-read-receipts-privacy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">value</span><span class="hl-1"> = </span><span class="hl-4">&#39;all&#39;</span><span class="hl-1"> </span><span class="hl-8">// &#39;none&#39;</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateReadReceiptsPrivacy</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="update-groups-add-privacy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Update Groups Add Privacy<a href="#update-groups-add-privacy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">value</span><span class="hl-1"> = </span><span class="hl-4">&#39;all&#39;</span><span class="hl-1"> </span><span class="hl-8">// &#39;contacts&#39; | &#39;contact_blacklist&#39;</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateGroupsAddPrivacy</span><span class="hl-1">(</span><span class="hl-0">value</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="update-default-disappearing-mode" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Update Default Disappearing Mode<a href="#update-default-disappearing-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Like <a href="#disappearing-messages">this</a>, ephemeral can be:</li>
</ul>
<table>
<thead>
<tr>
<th>Time</th>
<th>Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>Remove</td>
<td>0</td>
</tr>
<tr>
<td>24h</td>
<td>86.400</td>
</tr>
<tr>
<td>7d</td>
<td>604.800</td>
</tr>
<tr>
<td>90d</td>
<td>7.776.000</td>
</tr>
</tbody>
</table>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ephemeral</span><span class="hl-1"> = </span><span class="hl-9">86400</span><span class="hl-1"> </span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">updateDefaultDisappearingMode</span><span class="hl-1">(</span><span class="hl-0">ephemeral</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="broadcast-lists--stories" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Broadcast Lists &amp; Stories<a href="#broadcast-lists--stories" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="send-broadcast--stories" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Send Broadcast &amp; Stories<a href="#send-broadcast--stories" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Messages can be sent to broadcasts &amp; stories. You need to add the following message options in sendMessage, like this:</li>
</ul>
<pre><code class="ts"><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">sendMessage</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-0">jid</span><span class="hl-1">,</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">image:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">url:</span><span class="hl-1"> </span><span class="hl-0">url</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-0">caption:</span><span class="hl-1"> </span><span class="hl-0">caption</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-0">backgroundColor:</span><span class="hl-1"> </span><span class="hl-0">backgroundColor</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">font:</span><span class="hl-1"> </span><span class="hl-0">font</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">statusJidList:</span><span class="hl-1"> </span><span class="hl-0">statusJidList</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-0">broadcast:</span><span class="hl-1"> </span><span class="hl-5">true</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<ul>
<li>
<p>Message body can be a <code>extendedTextMessage</code> or <code>imageMessage</code> or <code>videoMessage</code> or <code>voiceMessage</code>, see <a href="https://baileys.whiskeysockets.io/types/AnyRegularMessageContent.html">here</a></p>
</li>
<li>
<p>You can add <code>backgroundColor</code> and other options in the message options, see <a href="https://baileys.whiskeysockets.io/types/MiscMessageGenerationOptions.html">here</a></p>
</li>
<li>
<p><code>broadcast: true</code> enables broadcast mode</p>
</li>
<li>
<p><code>statusJidList</code>: a list of people that you can get which you need to provide, which are the people who will get this status message.</p>
</li>
<li>
<p>You can send messages to broadcast lists the same way you send messages to groups &amp; individual chats.</p>
</li>
<li>
<p>Right now, WA Web does not support creating broadcast lists, but you can still delete them.</p>
</li>
<li>
<p>Broadcast IDs are in the format <code>12345678@broadcast</code></p>
</li>
</ul>
<a id="query-a-broadcast-lists-recipients--name" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Query a Broadcast List's Recipients &amp; Name<a href="#query-a-broadcast-lists-recipients--name" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">bList</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-7">getBroadcastListInfo</span><span class="hl-1">(</span><span class="hl-4">&#39;1234@broadcast&#39;</span><span class="hl-1">)</span><br/><span class="hl-0">console</span><span class="hl-1">.</span><span class="hl-7">log</span><span class="hl-1"> (</span><span class="hl-4">`list name: </span><span class="hl-5">${</span><span class="hl-0">bList</span><span class="hl-12">.</span><span class="hl-0">name</span><span class="hl-5">}</span><span class="hl-4">, recps: </span><span class="hl-5">${</span><span class="hl-0">bList</span><span class="hl-12">.</span><span class="hl-0">recipients</span><span class="hl-5">}</span><span class="hl-4">`</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="writing-custom-functionality" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Writing Custom Functionality<a href="#writing-custom-functionality" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Baileys is written with custom functionality in mind. Instead of forking the project &amp; re-writing the internals, you can simply write your own extensions.</p>
<a id="enabling-debug-level-in-baileys-logs" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Enabling Debug Level in Baileys Logs<a href="#enabling-debug-level-in-baileys-logs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>First, enable the logging of unhandled messages from WhatsApp by setting:</p>
<pre><code class="ts"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">sock</span><span class="hl-1"> = </span><span class="hl-7">makeWASocket</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">logger:</span><span class="hl-1"> </span><span class="hl-7">P</span><span class="hl-1">({ </span><span class="hl-0">level:</span><span class="hl-1"> </span><span class="hl-4">&#39;debug&#39;</span><span class="hl-1"> }),</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<p>This will enable you to see all sorts of messages WhatsApp sends in the console.</p>
<a id="how-whatsapp-communicate-with-us" class="tsd-anchor"></a><h3 class="tsd-anchor-link">How Whatsapp Communicate With Us<a href="#how-whatsapp-communicate-with-us" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-alert tsd-alert-tip"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertTip"></use></svg><span>Tip</span></div><p>
If you want to learn whatsapp protocol, we recommend to study about Libsignal Protocol and Noise Protocol</p>
</div>
<ul>
<li><strong>Example:</strong> Functionality to track the battery percentage of your phone. You enable logging and you'll see a message about your battery pop up in the console:<pre><code><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;level&quot;</span><span class="hl-1">: </span><span class="hl-9">10</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;fromMe&quot;</span><span class="hl-1">: </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;frame&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;tag&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-4">&quot;ib&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;attrs&quot;</span><span class="hl-0">:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-4">&quot;from&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-4">&quot;@s.whatsapp.net&quot;</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-4">&quot;content&quot;</span><span class="hl-0">:</span><span class="hl-1"> [</span><br/><span class="hl-1">            {</span><br/><span class="hl-1">                </span><span class="hl-4">&quot;tag&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-4">&quot;edge_routing&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">&quot;attrs&quot;</span><span class="hl-0">:</span><span class="hl-1"> {},</span><br/><span class="hl-1">                </span><span class="hl-4">&quot;content&quot;</span><span class="hl-0">:</span><span class="hl-1"> [</span><br/><span class="hl-1">                    {</span><br/><span class="hl-1">                        </span><span class="hl-4">&quot;tag&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-4">&quot;routing_info&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                        </span><span class="hl-4">&quot;attrs&quot;</span><span class="hl-0">:</span><span class="hl-1"> {},</span><br/><span class="hl-1">                        </span><span class="hl-4">&quot;content&quot;</span><span class="hl-0">:</span><span class="hl-1"> {</span><br/><span class="hl-1">                            </span><span class="hl-4">&quot;type&quot;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-4">&quot;Buffer&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                            </span><span class="hl-4">&quot;data&quot;</span><span class="hl-0">:</span><span class="hl-1"> [</span><span class="hl-9">8</span><span class="hl-1">,</span><span class="hl-9">2</span><span class="hl-1">,</span><span class="hl-9">8</span><span class="hl-1">,</span><span class="hl-9">5</span><span class="hl-1">]</span><br/><span class="hl-1">                        }</span><br/><span class="hl-1">                    }</span><br/><span class="hl-1">                ]</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">        ]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;msg&quot;</span><span class="hl-1">:</span><span class="hl-4">&quot;communication&quot;</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>

</li>
</ul>
<p>The <code>'frame'</code> is what the message received is, it has three components:</p>
<ul>
<li><code>tag</code> -- what this frame is about (eg. message will have 'message')</li>
<li><code>attrs</code> -- a string key-value pair with some metadata (contains ID of the message usually)</li>
<li><code>content</code> -- the actual data (eg. a message node will have the actual message content in it)</li>
<li>read more about this format <a href="/src/WABinary/readme.md">here</a></li>
</ul>
<a id="register-a-callback-for-websocket-events" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Register a Callback for Websocket Events<a href="#register-a-callback-for-websocket-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-alert tsd-alert-tip"><div class="tsd-alert-title"><svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertTip"></use></svg><span>Tip</span></div><p>
Recommended to see <code>onMessageReceived</code> function in <code>socket.ts</code> file to understand how websockets events are fired</p>
</div>
<pre><code class="ts"><span class="hl-8">// for any message with tag &#39;edge_routing&#39;</span><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ws</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;CB:edge_routing&#39;</span><span class="hl-1">, (</span><span class="hl-0">node</span><span class="hl-1">: </span><span class="hl-10">BinaryNode</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> { })</span><br/><br/><span class="hl-8">// for any message with tag &#39;edge_routing&#39; and id attribute = abcd</span><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ws</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;CB:edge_routing,id:abcd&#39;</span><span class="hl-1">, (</span><span class="hl-0">node</span><span class="hl-1">: </span><span class="hl-10">BinaryNode</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> { })</span><br/><br/><span class="hl-8">// for any message with tag &#39;edge_routing&#39;, id attribute = abcd &amp; first content node routing_info</span><br/><span class="hl-0">sock</span><span class="hl-1">.</span><span class="hl-0">ws</span><span class="hl-1">.</span><span class="hl-7">on</span><span class="hl-1">(</span><span class="hl-4">&#39;CB:edge_routing,id:abcd,routing_info&#39;</span><span class="hl-1">, (</span><span class="hl-0">node</span><span class="hl-1">: </span><span class="hl-10">BinaryNode</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> { })</span>
</code><button type="button">Copy</button></pre>

<div class="tsd-alert tsd-alert-note"><div class="tsd-alert-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true"><use href="assets/icons.svg#icon-alertNote"></use></svg><span>Note</span></div><p>
Also, this repo is now licenced under GPL 3 since it uses <a href="https://git.questbook.io/backend/service-coderunner/-/merge_requests/1">libsignal-node</a></p>
</div>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#baileys---typescriptjavascript-whatsapp-web-api"><span>&lt;div align=&#39;center&#39;&gt;<wbr/>Baileys -<wbr/> <wbr/>Typescript/<wbr/>Javascript <wbr/>Whats<wbr/>App <wbr/>Web API&lt;/div&gt;</span></a><ul><li><ul><li><a href="#important-note"><span>Important <wbr/>Note</span></a></li><li><ul><li><a href="#liability-and-license-notice"><span>Liability and <wbr/>License <wbr/>Notice</span></a></li></ul></li></ul></li><li><a href="#"><span></span></a></li><li><a href="#example"><span>Example</span></a></li><li><a href="#install"><span>Install</span></a></li></ul><a href="#links"><span>Links</span></a><a href="#index"><span>Index</span></a><ul><li><a href="#connecting-account"><span>Connecting <wbr/>Account</span></a></li><li><ul><li><a href="#starting-socket-with-qr-code"><span>Starting socket with QR-<wbr/>CODE</span></a></li><li><a href="#starting-socket-with-pairing-code"><span>Starting socket with <wbr/>Pairing <wbr/>Code</span></a></li><li><a href="#receive-full-history"><span>Receive <wbr/>Full <wbr/>History</span></a></li></ul></li><li><a href="#important-notes-about-socket-config"><span>Important <wbr/>Notes <wbr/>About <wbr/>Socket <wbr/>Config</span></a></li><li><ul><li><a href="#caching-group-metadata-recommended"><span>Caching <wbr/>Group <wbr/>Metadata (<wbr/>Recommended)</span></a></li><li><a href="#improve-retry-system--decrypt-poll-votes"><span>Improve <wbr/>Retry <wbr/>System &amp; <wbr/>Decrypt <wbr/>Poll <wbr/>Votes</span></a></li><li><a href="#receive-notifications-in-whatsapp-app"><span>Receive <wbr/>Notifications in <wbr/>Whatsapp <wbr/>App</span></a></li></ul></li><li><a href="#saving--restoring-sessions"><span>Saving &amp; <wbr/>Restoring <wbr/>Sessions</span></a></li><li><a href="#handling-events"><span>Handling <wbr/>Events</span></a></li><li><ul><li><a href="#example-to-start"><span>Example to <wbr/>Start</span></a></li><li><a href="#decrypt-poll-votes"><span>Decrypt <wbr/>Poll <wbr/>Votes</span></a></li><li><a href="#summary-of-events-on-first-connection"><span>Summary of <wbr/>Events on <wbr/>First <wbr/>Connection</span></a></li></ul></li><li><a href="#implementing-a-data-store"><span>Implementing a <wbr/>Data <wbr/>Store</span></a></li><li><a href="#whatsapp-ids-explain"><span>Whatsapp IDs <wbr/>Explain</span></a></li><li><a href="#utility-functions"><span>Utility <wbr/>Functions</span></a></li><li><a href="#sending-messages"><span>Sending <wbr/>Messages</span></a></li><li><ul><li><a href="#non-media-messages"><span>Non-<wbr/>Media <wbr/>Messages</span></a></li><li><ul><li><a href="#text-message"><span>Text <wbr/>Message</span></a></li><li><a href="#quote-message-works-with-all-types"><span>Quote <wbr/>Message (works with all types)</span></a></li><li><a href="#mention-user-works-with-most-types"><span>Mention <wbr/>User (works with most types)</span></a></li><li><a href="#forward-messages"><span>Forward <wbr/>Messages</span></a></li><li><a href="#location-message"><span>Location <wbr/>Message</span></a></li><li><a href="#contact-message"><span>Contact <wbr/>Message</span></a></li><li><a href="#reaction-message"><span>Reaction <wbr/>Message</span></a></li><li><a href="#pin-message"><span>Pin <wbr/>Message</span></a></li><li><a href="#poll-message"><span>Poll <wbr/>Message</span></a></li></ul></li><li><a href="#sending-messages-with-link-previews"><span>Sending <wbr/>Messages with <wbr/>Link <wbr/>Previews</span></a></li><li><a href="#media-messages"><span>Media <wbr/>Messages</span></a></li><li><ul><li><a href="#gif-message"><span>Gif <wbr/>Message</span></a></li><li><a href="#video-message"><span>Video <wbr/>Message</span></a></li><li><a href="#audio-message"><span>Audio <wbr/>Message</span></a></li><li><a href="#image-message"><span>Image <wbr/>Message</span></a></li><li><a href="#view-once-message"><span>View <wbr/>Once <wbr/>Message</span></a></li></ul></li></ul></li><li><a href="#modify-messages"><span>Modify <wbr/>Messages</span></a></li><li><ul><li><a href="#deleting-messages-for-everyone"><span>Deleting <wbr/>Messages (for everyone)</span></a></li><li><a href="#editing-messages"><span>Editing <wbr/>Messages</span></a></li></ul></li><li><a href="#manipulating-media-messages"><span>Manipulating <wbr/>Media <wbr/>Messages</span></a></li><li><ul><li><a href="#thumbnail-in-media-messages"><span>Thumbnail in <wbr/>Media <wbr/>Messages</span></a></li><li><a href="#downloading-media-messages"><span>Downloading <wbr/>Media <wbr/>Messages</span></a></li><li><a href="#re-upload-media-message-to-whatsapp"><span>Re-<wbr/>upload <wbr/>Media <wbr/>Message to <wbr/>Whatsapp</span></a></li></ul></li><li><a href="#reject-call"><span>Reject <wbr/>Call</span></a></li><li><a href="#send-states-in-chat"><span>Send <wbr/>States in <wbr/>Chat</span></a></li><li><ul><li><a href="#reading-messages"><span>Reading <wbr/>Messages</span></a></li><li><a href="#update-presence"><span>Update <wbr/>Presence</span></a></li></ul></li><li><a href="#modifying-chats"><span>Modifying <wbr/>Chats</span></a></li><li><ul><li><a href="#archive-a-chat"><span>Archive a <wbr/>Chat</span></a></li><li><a href="#muteunmute-a-chat"><span>Mute/<wbr/>Unmute a <wbr/>Chat</span></a></li><li><a href="#mark-a-chat-readunread"><span>Mark a <wbr/>Chat <wbr/>Read/<wbr/>Unread</span></a></li><li><a href="#delete-a-message-for-me"><span>Delete a <wbr/>Message for <wbr/>Me</span></a></li><li><a href="#delete-a-chat"><span>Delete a <wbr/>Chat</span></a></li><li><a href="#pinunpin-a-chat"><span>Pin/<wbr/>Unpin a <wbr/>Chat</span></a></li><li><a href="#starunstar-a-message"><span>Star/<wbr/>Unstar a <wbr/>Message</span></a></li><li><a href="#disappearing-messages"><span>Disappearing <wbr/>Messages</span></a></li></ul></li><li><a href="#user-querys"><span>User <wbr/>Querys</span></a></li><li><ul><li><a href="#check-if-id-exists-in-whatsapp"><span>Check <wbr/>If ID <wbr/>Exists in <wbr/>Whatsapp</span></a></li><li><a href="#query-chat-history-groups-too"><span>Query <wbr/>Chat <wbr/>History (groups too)</span></a></li><li><a href="#fetch-status"><span>Fetch <wbr/>Status</span></a></li><li><a href="#fetch-profile-picture-groups-too"><span>Fetch <wbr/>Profile <wbr/>Picture (groups too)</span></a></li><li><a href="#fetch-bussines-profile-such-as-description-or-category"><span>Fetch <wbr/>Bussines <wbr/>Profile (such as description or category)</span></a></li><li><a href="#fetch-someones-presence-if-theyre-typing-or-online"><span>Fetch <wbr/>Someone&#39;s <wbr/>Presence (if they&#39;re typing or online)</span></a></li></ul></li><li><a href="#change-profile"><span>Change <wbr/>Profile</span></a></li><li><ul><li><a href="#change-profile-status"><span>Change <wbr/>Profile <wbr/>Status</span></a></li><li><a href="#change-profile-name"><span>Change <wbr/>Profile <wbr/>Name</span></a></li><li><a href="#change-display-picture-groups-too"><span>Change <wbr/>Display <wbr/>Picture (groups too)</span></a></li><li><a href="#remove-display-picture-groups-too"><span>Remove display picture (groups too)</span></a></li></ul></li><li><a href="#groups"><span>Groups</span></a></li><li><ul><li><a href="#create-a-group"><span>Create a <wbr/>Group</span></a></li><li><a href="#addremove-or-demotepromote"><span>Add/<wbr/>Remove or <wbr/>Demote/<wbr/>Promote</span></a></li><li><a href="#change-subject-name"><span>Change <wbr/>Subject (name)</span></a></li><li><a href="#change-description"><span>Change <wbr/>Description</span></a></li><li><a href="#change-settings"><span>Change <wbr/>Settings</span></a></li><li><a href="#leave-a-group"><span>Leave a <wbr/>Group</span></a></li><li><a href="#get-invite-code"><span>Get <wbr/>Invite <wbr/>Code</span></a></li><li><a href="#revoke-invite-code"><span>Revoke <wbr/>Invite <wbr/>Code</span></a></li><li><a href="#join-using-invitation-code"><span>Join <wbr/>Using <wbr/>Invitation <wbr/>Code</span></a></li><li><a href="#get-group-info-by-invite-code"><span>Get <wbr/>Group <wbr/>Info by <wbr/>Invite <wbr/>Code</span></a></li><li><a href="#query-metadata-participants-name-description"><span>Query <wbr/>Metadata (participants, name, description...)</span></a></li><li><a href="#join-using-groupinvitemessage"><span>Join using group<wbr/>Invite<wbr/>Message</span></a></li><li><a href="#get-request-join-list"><span>Get <wbr/>Request <wbr/>Join <wbr/>List</span></a></li><li><a href="#approvereject-request-join"><span>Approve/<wbr/>Reject <wbr/>Request <wbr/>Join</span></a></li><li><a href="#get-all-participating-groups-metadata"><span>Get <wbr/>All <wbr/>Participating <wbr/>Groups <wbr/>Metadata</span></a></li><li><a href="#toggle-ephemeral"><span>Toggle <wbr/>Ephemeral</span></a></li><li><a href="#change-add-mode"><span>Change <wbr/>Add <wbr/>Mode</span></a></li></ul></li><li><a href="#privacy"><span>Privacy</span></a></li><li><ul><li><a href="#blockunblock-user"><span>Block/<wbr/>Unblock <wbr/>User</span></a></li><li><a href="#get-privacy-settings"><span>Get <wbr/>Privacy <wbr/>Settings</span></a></li><li><a href="#get-blocklist"><span>Get <wbr/>Block<wbr/>List</span></a></li><li><a href="#update-lastseen-privacy"><span>Update <wbr/>Last<wbr/>Seen <wbr/>Privacy</span></a></li><li><a href="#update-online-privacy"><span>Update <wbr/>Online <wbr/>Privacy</span></a></li><li><a href="#update-profile-picture-privacy"><span>Update <wbr/>Profile <wbr/>Picture <wbr/>Privacy</span></a></li><li><a href="#update-status-privacy"><span>Update <wbr/>Status <wbr/>Privacy</span></a></li><li><a href="#update-read-receipts-privacy"><span>Update <wbr/>Read <wbr/>Receipts <wbr/>Privacy</span></a></li><li><a href="#update-groups-add-privacy"><span>Update <wbr/>Groups <wbr/>Add <wbr/>Privacy</span></a></li><li><a href="#update-default-disappearing-mode"><span>Update <wbr/>Default <wbr/>Disappearing <wbr/>Mode</span></a></li></ul></li><li><a href="#broadcast-lists--stories"><span>Broadcast <wbr/>Lists &amp; <wbr/>Stories</span></a></li><li><ul><li><a href="#send-broadcast--stories"><span>Send <wbr/>Broadcast &amp; <wbr/>Stories</span></a></li><li><a href="#query-a-broadcast-lists-recipients--name"><span>Query a <wbr/>Broadcast <wbr/>List&#39;s <wbr/>Recipients &amp; <wbr/>Name</span></a></li></ul></li><li><a href="#writing-custom-functionality"><span>Writing <wbr/>Custom <wbr/>Functionality</span></a></li><li><ul><li><a href="#enabling-debug-level-in-baileys-logs"><span>Enabling <wbr/>Debug <wbr/>Level in <wbr/>Baileys <wbr/>Logs</span></a></li><li><a href="#how-whatsapp-communicate-with-us"><span>How <wbr/>Whatsapp <wbr/>Communicate <wbr/>With <wbr/>Us</span></a></li><li><a href="#register-a-callback-for-websocket-events"><span>Register a <wbr/>Callback for <wbr/>Websocket <wbr/>Events</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">baileys</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
